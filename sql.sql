/*
ALTER TABLE SCHEMA.TABLE
SOME ACTION;

EXAMPLES OF ACTIONS:
ADD COLUMN_NAME DATATYPE
DROP COLUMN COLUMN_NAME
MODIFY COLUMN COLUMN_NAME DATATYPE
RENAME COLUMN OLD_COLUMN_NAME TO NEW_COLUMN_NAME
RENAME TO NEW_TABLE_NAME
...
;
*/
USE TEMP_SCHEMA;

CREATE TABLE SAMPLE_1(COL1 VARCHAR(30),COL2 INT);

INSERT INTO SAMPLE_1 VALUES('ANJALI',2002);
INSERT INTO SAMPLE_1 VALUES('ARUSHI',2003);
INSERT INTO SAMPLE_1 VALUES('ANU',2004);
INSERT INTO SAMPLE_1 VALUES('SOHAM',2005);

-- ADDING COLUMNS
ALTER TABLE SAMPLE_1 ADD COLUMN COL_ADD INTEGER;          -- SINGLE COLUMN

SELECT * FROM SAMPLE_1;

ALTER TABLE SAMPLE_1 ADD COLUMN COL_ADD_2 INTEGER, ADD COLUMN COL_3 INTEGER;     -- MULTIPLE COLUMN


-- DROPPING COLUMNS
ALTER TABLE SAMPLE_1 DROP COLUMN COL_ADD;                  -- SINGLE COLUMN

ALTER TABLE SAMPLE_1 DROP COLUMN COL_ADD_2, DROP COLUMN COL_3;   -- MULTIPLE COLUMN

SELECT * FROM SAMPLE_1;


-- MODIFY COLUMN
ALTER TABLE SAMPLE_1 MODIFY COLUMN COL2 VARCHAR(300);  -- CAN CONVERT INT TO VARCHAR
SELECT * FROM SAMPLE_1;

ALTER TABLE SAMPLE_1 MODIFY COLUMN COL1 INTEGER;       -- ERROR (CANNOT CONVERT VARCHAR TO INT)
SELECT * FROM SAMPLE_1;

ALTER TABLE SAMPLE_1 ADD COLUMN COL_AGE INTEGER;
INSERT INTO SAMPLE_1 (COL_AGE)VALUES (10);
INSERT INTO SAMPLE_1 (COL_AGE)VALUES (20);
INSERT INTO SAMPLE_1 (COL_AGE)VALUES (15);
INSERT INTO SAMPLE_1 (COL_AGE)VALUES (18);
SELECT * FROM SAMPLE_1;


-- RENAME COLUMN
ALTER TABLE SAMPLE_1 RENAME COLUMN COL1 TO NAME;
SELECT * FROM SAMPLE_1;

-- RENAME TABLE
ALTER TABLE SAMPLE_1 RENAME SAMPLE_RENAMED;
SELECT * FROM SAMPLE_RENAMED;


/*
UPDATE TABLE_NAME
SET COLUMN1=VALUE1,COLUMN2=VALUE2
WHERE CONDITION;
*/
USE EMPLOYEE;
SELECT * FROM EMP;
UPDATE EMP SET ENAME='GABRIELLE' WHERE EMPNO = 7839;
SELECT * FROM EMP;

-- MULTIPLE SET
UPDATE EMP SET JOB='MANAGER', SAL=10000 WHERE EMPNO=7839;
SELECT * FROM EMP;

-- USING AND
UPDATE EMP SET SAL=9000 WHERE SAL > 5000 AND JOB='MANAGER';
SELECT * FROM EMP;


/*
DELETE FROM TABLE_NAME
WHERE CONDITION;
*/  -- IF NO CONDITION IT WILL DELETE ENTIRE TABLE
DELETE FROM EMP WHERE EMPNO= 7698;

DELETE FROM TEMP_SCHEMA.DEMO_1;  -- DELETE TABLE



-- CONSTRAINTS ----------------------------------------------------------------------
-- NOT NULL
USE TEMP_SCHEMA;
CREATE TABLE CONSTRAINTS(COL_1 INTEGER NOT NULL, COL_2 VARCHAR(255));
INSERT INTO CONSTRAINTS VALUES(1,NULL);   -- COL2 CAN BE NULL SO NO ERROR
INSERT INTO CONSTRAINTS VALUES(NULL,'ANJALI');   -- COL1 CANNOT BE NULL SO IT GIVES ERROR

ALTER TABLE CONSTRAINTS ADD COLUMN COL_ADD VARCHAR(300);
DESC CONSTRAINTS;
SELECT * FROM CONSTRAINTS;

DELETE FROM CONSTRAINTS WHERE COL_1=1;
ALTER TABLE CONSTRAINTS MODIFY COLUMN COL_ADD VARCHAR(255) NOT NULL;  -- ALTERING TABLE TO ADD NOT NULL CONSTRAINT FOR A COLUMN

-- UNIQUE CONSTRAINTS
CREATE TABLE CONSTRAINTS_DEMO(COL_1 INTEGER UNIQUE ,COL_2 VARCHAR(255));

INSERT INTO CONSTRAINTS_DEMO VALUES(1,'ANJALI');
INSERT INTO CONSTRAINTS_DEMO VALUES(1,'ARU');  -- ERROR BCOZ UNIQUE ACCEPTS ONLY UNIQUE VALUES
INSERT INTO CONSTRAINTS_DEMO VALUES(NULL,'ANJALI');  -- NO ERROR BCOZ UNIQUE ALSO ACCEPTS MULTIPLE NULL VALUES (WHEN UNIQUE AND NOT NULL THEN IT WILL NOT ACCEPT)

-- UNIQUE CONSTRAINT WITH NOT NULL
CREATE TABLE CONSTRAINTS_DEMO2(COL_1 INTEGER UNIQUE NOT NULL ,COL_2 VARCHAR(255));
INSERT INTO CONSTRAINTS_DEMO2 VALUES(NULL,'ANJALI');  -- ERROR COZ DOES NOT ACCEPT NULL VALUES

-- DEFAULT CONSTRAINT
/*
CREATE TABLE TABLE_NAME(
COL1 DATATYPE DEFAULT DEFAULT_VALUE);
*/
CREATE TABLE DEFAULT_CONSTRAINT(COL_1 INTEGER,COL_2 VARCHAR(255));

ALTER TABLE DEFAULT_CONSTRAINT MODIFY COLUMN COL_1 INTEGER DEFAULT '07';
SELECT * FROM DEFAULT_CONSTRAINT;
INSERT INTO DEFAULT_CONSTRAINT (COL_2)VALUES('SOHAM'); -- DEFAULT VALUE ADDED FOR COL_1
INSERT INTO DEFAULT_CONSTRAINT (COL_1,COL_2)VALUES(NULL,'SOHAM');  -- THIS WILL NOT ADD DEFAULT VALUE

-- CHECK CONSTRAINT
/*
CREATE TABLE TABLE_NAME(
COL1 DATATYPE CHECK(EXPRESSION),
COL2 DATATYPE CHECK(EXPRESSION)
);
*/
CREATE TABLE CHECK_CONSTRAINT2(COL_1 INTEGER CHECK (COL_1>10),COL_2 VARCHAR(255));
INSERT INTO CHECK_CONSTRAINT2 VALUES(10,'ANJALI');  -- ERROR BECOZ VALUE IS EQUAL TO 10
INSERT INTO CHECK_CONSTRAINT2 VALUES(20,'ARU');     -- NO ERROR

-- TO CHECK CONSTRAINT OF TABLE
SHOW CREATE TABLE CHECK_CONSTRAINT2 ;
-- DROPPING CONSTRAINT
ALTER TABLE CHECK_CONSTRAINT2 DROP CONSTRAINT CHECK_CONSTRAINT2_CHK_1;


-- PRIMARY KEY AND FOREIGN KEY
CREATE TABLE PRI_TABLE( COL_1 INTEGER , COL_2 VARCHAR(10), PRIMARY KEY(COL_1));
CREATE TABLE FOR_TABLE( COL_1 VARCHAR(10) , COL_2 INTEGER, FOREIGN KEY(COL_2) REFERENCES PRI_TABLE(COL_1));

INSERT INTO FOR_TABLE VALUE('APPLE',1); -- YOU CANNOT INSERT A RECORD UNTIL THE CORRESPONDING VALUE IS IN THE PK COLUMN

INSERT INTO PRI_TABLE VALUE(1,'APPLE');
SELECT * FROM PRI_TABLE;
INSERT INTO PRI_TABLE VALUE(2,'ANIMAL');

INSERT INTO PRI_TABLE VALUES(NULL,'ANIMAL'); -- PRIMARY TABLE DOES NOT ACCEPT NULL AS WELL AS DUPLICATE VALUES
INSERT INTO PRI_TABLE VALUE(2,'HAPPY');   -- ERROR

-- DROPING PRIMARY KEY DOES NOT WORK UNTIL DEPENDACNY IS REMOVED
ALTER TABLE PRI_TABLE DROP PRIMARY KEY; -- ERROR

-- DROPPING FOREIGN KEY CONSTRAINT
SHOW CREATE TABLE FOR_TABLE ;
ALTER TABLE FOR_TABLE DROP CONSTRAINT FOR_TABLE_IBFK_1; -- DROPS FOREIGN KEY CONSTRAINT

-- ADDING FOREIGN KEY
ALTER TABLE FOR_TABLE ADD FOREIGN KEY(COL_2) REFERENCES PRI_TABLE(COL_1);



-- CREATE NEW DATABASE HR----------------------------------------------
CREATE DATABASE HR;
CREATE
 TABLE HR.EMP
(
EMP_NO INT,
    E_NAME VARCHAR(255),
    JOB VARCHAR(255),
    MGR INT,
    HIRE_DATE DATE,
    SAL DECIMAL(10,2),
    COMM DECIMAL(10,2),
    DEPT_NO INT
);

INSERT INTO HR.EMP VALUES
(7369, 'SMITH', 'CLERK', 7902, '1980-12-17', 800.00, NULL, 20),
    (7499, 'ALLEN', 'SALESMAN', 7698, '1981-02-20', 1600.00, 300.00, 30),
    (7521, 'WARD', 'SALESMAN', 7698, '1981-02-22', 1250.00, 500.00, 30),
    (7566, 'JONES', 'MANAGER', 7839, '1981-04-02', 2975.00, NULL, 20),
    (7654, 'MARTIN', 'SALESMAN', 7698, '1981-09-28', 1250.00, 1400.00, 30),
    (7698, 'BLAKE', 'MANAGER', 7839, '1981-05-01', 2850.00, NULL, 30),
    (7782, 'CLARK', 'MANAGER', 7839, '1981-06-09', 2450.00, NULL, 10),
    (7788, 'SCOTT', 'ANALYST', 7566, '1982-12-09', 3000.00, NULL, 20),
    (7839, 'KING', 'PRESIDENT', NULL, '1981-11-17', 5000.00, NULL, 10),
    (7844, 'TURNER', 'SALESMAN', 7698, '1981-09-08', 1500.00, 0.00, 30),
    (7876, 'ADAMS', 'CLERK', 7788, '1983-01-12', 1100.00, NULL, 20),
    (7900, 'JAMES', 'CLERK', 7698, '1981-12-03', 950.00, NULL, 30),
    (7902, 'FORD', 'ANALYST', 7566, '1981-12-03', 3000.00, NULL, 20),
    (7934, 'MILLER', 'CLERK', 7782, '1982-01-23', 1300.00, NULL, 10);

SELECT * FROM HR.EMP;

CREATE TABLE HR.DEPT(
DEPT_ID INT,
D_NAME VARCHAR(255),
LOC VARCHAR(255));

INSERT INTO HR.DEPT VALUES
(10,'ACCOUNTING','NEW YORK'),
(20,'RESEARCH','DALLAS'),
(30,'SALES','CHICAGO'),
(40,'OPERATIONS','BOSTON');

SELECT * FROM HR.DEPT;

CREATE DATABASE CUSTOMER_ORDERS;
USE CUSTOMER_ORDERS;

SELECT * FROM hr.emp 
WHERE 
    SAL BETWEEN 1000 AND 3000
    OR (JOB IN ('SALESMAN', 'CLERK') AND COMM = 1400);
    
    -- IN 
select * from hr.emp where job = 'CLERK' or job = 'SALESMAN';
select * from hr.emp where job in ('CLEARK','SALESMAN');
select * from hr.emp where sal in (800,1250,1600);


-- Copy EMP table
CREATE TABLE assignment_schema.emp AS
SELECT * FROM hr.emp;

-- Copy DEPT table
CREATE TABLE assignment_schema.dept AS
SELECT * FROM hr.dept;
SELECT * FROM hr.emp;

    
    



-- ASSIIGNMENT-----------------------------------------------------------
CREATE DATABASE ASSIGNMENT_SCHEMA;
USE ASSIGNMENT_SCHEMA;


   